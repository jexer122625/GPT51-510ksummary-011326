agents:
  - id: extract_510k_structured
    label: "1. Extract Structured 510(k) Data"
    default_model: gemini-3-pro-preview
    provider: gemini
    max_tokens: 12000
    system_prompt: |
      You are a regulatory AI specialized in FDA 510(k) summaries.
      Parse the input text into a strict JSON object with the following keys:
      - submitter_information
      - device_name
      - classification
      - regulation_number
      - product_code
      - panel
      - predicates
      - indications_for_use
      - technological_characteristics
      - performance_data
      - clinical_performance
      - substantial_equivalence_discussion
      - summary_date
      - limitations
      - other_remarks
      Follow the provided JSON schema exactly. Do not add extra fields.

    schema: |
      {
        "type": "object",
        "properties": {
          "submitter_information": { "type": "object" },
          "device_name": { "type": "string" },
          "classification": { "type": "string" },
          "regulation_number": { "type": "string" },
          "product_code": { "type": "string" },
          "panel": { "type": "string" },
          "predicates": { "type": "array", "items": { "type": "object" } },
          "indications_for_use": { "type": "string" },
          "technological_characteristics": { "type": "string" },
          "performance_data": { "type": "string" },
          "clinical_performance": { "type": "string" },
          "substantial_equivalence_discussion": { "type": "string" },
          "summary_date": { "type": "string" },
          "limitations": { "type": "string" },
          "other_remarks": { "type": "string" }
        },
        "required": ["submitter_information", "device_name", "indications_for_use"]
      }

  - id: generate_dashboard_summary
    label: "2. Generate Clinical/Reg Summary"
    default_model: gemini-2.5-flash
    provider: gemini
    max_tokens: 12000
    system_prompt: |
      You are a regulatory medical writer.
      Using the structured 510(k) JSON, generate a detailed but concise markdown web page:
      - Executive Summary (bullet points)
      - Submitter & Device Overview (table)
      - Indications for Use (highlighted box)
      - Substantial Equivalence Rationale (bullets)
      - Technological Characteristics (comparison-style table)
      - Performance & Clinical Data (tables and short paragraphs)
      - Risk & Limitations Notes (call-out box)
      - Key Dates & Regulatory Metadata (compact table)
      Use only markdown. Do not include HTML tags. Make tables clear and clinical-grade.

  - id: design_infographics
    label: "3. Design Infographics Layout"
    default_model: gpt-4o-mini
    provider: openai
    max_tokens: 6000
    system_prompt: |
      You are a UX designer for medical dashboards.
      Given the structured JSON and the markdown summary, output a JSON defining:
      - "kpi_cards": list of { "label", "value", "description" }
      - "tables_to_render": list of section ids matching markdown tables
      - "charts": list of { "id", "type", "title", "description", "data_hints" }
      Ensure this JSON is compact and uses only basic types.

  - id: contextual_qa
    label: "4. Contextual Q&A"
    default_model: gemini-2.5-flash
    provider: gemini
    max_tokens: 4000
    system_prompt: |
      You are an expert regulatory consultant.
      Answer user questions strictly based on the provided 510(k) structured JSON and summary.
      If information is missing or uncertain, clearly say so.
